import{_ as n,p as s,q as a,Z as e}from"./framework-fdd38eac.js";const t={},p=e(`<h1 id="rem的原理" tabindex="-1"><a class="header-anchor" href="#rem的原理" aria-hidden="true">#</a> rem的原理</h1><h2 id="rem是什么" tabindex="-1"><a class="header-anchor" href="#rem是什么" aria-hidden="true">#</a> rem是什么</h2><p>rem（root em）是CSS3新增的相对长度单位，相对于根元素（HTML标签）的字体大小（font-size）来计算。</p><p><strong>核心特点：</strong></p><ul><li>1rem = HTML根元素的font-size值</li><li>所有使用rem单位的元素都会随根元素字体大小的变化而等比缩放</li><li>区别于em（相对于父元素字体大小）</li></ul><h2 id="实现原理" tabindex="-1"><a class="header-anchor" href="#实现原理" aria-hidden="true">#</a> 实现原理</h2><h3 id="基本原理" tabindex="-1"><a class="header-anchor" href="#基本原理" aria-hidden="true">#</a> 基本原理</h3><p>rem响应式布局的核心思想是：<strong>动态计算根元素的font-size，使所有以rem为单位的元素实现等比缩放</strong>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 基础公式</span>
当前设备<span class="token constant">HTML</span>的font<span class="token operator">-</span>size <span class="token operator">=</span> <span class="token punctuation">(</span>当前设备宽度 <span class="token operator">/</span> 设计稿宽度<span class="token punctuation">)</span> <span class="token operator">*</span> 基准font<span class="token operator">-</span>size
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="实现步骤" tabindex="-1"><a class="header-anchor" href="#实现步骤" aria-hidden="true">#</a> 实现步骤</h3><p><strong>1. 设置基准换算比例</strong></p><p>通常设置 <code>html { font-size: 100px; }</code> 作为基准，方便计算：</p><ul><li>设计稿测量值 / 100 = rem值</li><li>例如：设计稿中300px → CSS中写3rem</li></ul><p><strong>2. 动态计算根元素字体大小</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">setRem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 设计稿宽度（常见750px或640px）</span>
  <span class="token keyword">const</span> designWidth <span class="token operator">=</span> <span class="token number">750</span><span class="token punctuation">;</span>
  <span class="token comment">// 基准font-size</span>
  <span class="token keyword">const</span> baseFontSize <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 获取当前设备宽度</span>
  <span class="token keyword">const</span> clientWidth <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">||</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>
  
  <span class="token comment">// 限制最大宽度（防止PC端显示过大）</span>
  <span class="token keyword">const</span> maxWidth <span class="token operator">=</span> <span class="token number">750</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> targetWidth <span class="token operator">=</span> clientWidth <span class="token operator">&gt;</span> maxWidth <span class="token operator">?</span> maxWidth <span class="token operator">:</span> clientWidth<span class="token punctuation">;</span>
  
  <span class="token comment">// 计算当前设备的font-size</span>
  <span class="token keyword">const</span> currentFontSize <span class="token operator">=</span> <span class="token punctuation">(</span>targetWidth <span class="token operator">/</span> designWidth<span class="token punctuation">)</span> <span class="token operator">*</span> baseFontSize<span class="token punctuation">;</span>
  
  <span class="token comment">// 设置根元素字体大小</span>
  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> currentFontSize <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 初始化</span>
<span class="token function">setRem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 监听窗口变化</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> setRem<span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;orientationchange&#39;</span><span class="token punctuation">,</span> setRem<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3. 使用rem单位编写样式</strong></p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token comment">/* 设计稿宽度750px，基准100px */</span>
<span class="token selector">html</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token comment">/* 1rem = 100px (设计稿) */</span>
<span class="token punctuation">}</span>

<span class="token selector">.box</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 3rem<span class="token punctuation">;</span>        <span class="token comment">/* 设计稿300px */</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>       <span class="token comment">/* 设计稿200px */</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0.2rem<span class="token punctuation">;</span>    <span class="token comment">/* 设计稿20px */</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.28rem<span class="token punctuation">;</span> <span class="token comment">/* 设计稿28px */</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="计算案例" tabindex="-1"><a class="header-anchor" href="#计算案例" aria-hidden="true">#</a> 计算案例</h3><p>假设设计稿宽度750px，基准100px：</p><table><thead><tr><th>设备宽度</th><th>计算公式</th><th>HTML的font-size</th><th>1rem实际值</th></tr></thead><tbody><tr><td>375px</td><td>(375/750)*100</td><td>50px</td><td>50px</td></tr><tr><td>414px</td><td>(414/750)*100</td><td>55.2px</td><td>55.2px</td></tr><tr><td>750px</td><td>(750/750)*100</td><td>100px</td><td>100px</td></tr></tbody></table><h2 id="现有的库和工具" tabindex="-1"><a class="header-anchor" href="#现有的库和工具" aria-hidden="true">#</a> 现有的库和工具</h2><h3 id="_1-lib-flexible-淘宝方案" tabindex="-1"><a class="header-anchor" href="#_1-lib-flexible-淘宝方案" aria-hidden="true">#</a> 1. lib-flexible (淘宝方案)</h3><p><strong>最流行的移动端适配方案</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> lib-flexible <span class="token parameter variable">--save</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> <span class="token string">&#39;lib-flexible&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>特点：</strong></p><ul><li>自动设置根元素font-size和viewport的scale</li><li>将屏幕分为10等份，1rem = 屏幕宽度/10</li><li>同时支持动态修改dpr（设备像素比）</li></ul><h3 id="_2-postcss-pxtorem" tabindex="-1"><a class="header-anchor" href="#_2-postcss-pxtorem" aria-hidden="true">#</a> 2. postcss-pxtorem</h3><p><strong>自动将px转换为rem</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> postcss-pxtorem --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// postcss.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;postcss-pxtorem&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">rootValue</span><span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span>           <span class="token comment">// 设计稿宽度/10（配合lib-flexible）</span>
      <span class="token literal-property property">propList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>         <span class="token comment">// 需要转换的属性</span>
      <span class="token literal-property property">selectorBlackList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token comment">// 不转换的选择器</span>
      <span class="token literal-property property">minPixelValue</span><span class="token operator">:</span> <span class="token number">2</span>         <span class="token comment">// 小于2px不转换</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-postcss-px-to-viewport" tabindex="-1"><a class="header-anchor" href="#_3-postcss-px-to-viewport" aria-hidden="true">#</a> 3. postcss-px-to-viewport</h3><p><strong>将px转换为vw/vh视口单位</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> postcss-px-to-viewport --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// postcss.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;postcss-px-to-viewport&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">viewportWidth</span><span class="token operator">:</span> <span class="token number">750</span><span class="token punctuation">,</span>      <span class="token comment">// 设计稿宽度</span>
      <span class="token literal-property property">viewportHeight</span><span class="token operator">:</span> <span class="token number">1334</span><span class="token punctuation">,</span>    <span class="token comment">// 设计稿高度</span>
      <span class="token literal-property property">unitPrecision</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>        <span class="token comment">// 转换精度</span>
      <span class="token literal-property property">viewportUnit</span><span class="token operator">:</span> <span class="token string">&#39;vw&#39;</span><span class="token punctuation">,</span>      <span class="token comment">// 使用的单位</span>
      <span class="token literal-property property">minPixelValue</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token comment">// 最小转换值</span>
      <span class="token literal-property property">mediaQuery</span><span class="token operator">:</span> <span class="token boolean">false</span>        <span class="token comment">// 是否转换媒体查询中的px</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-amfe-flexible" tabindex="-1"><a class="header-anchor" href="#_4-amfe-flexible" aria-hidden="true">#</a> 4. amfe-flexible</h3><p><strong>lib-flexible的升级版</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> amfe-flexible <span class="token parameter variable">--save</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> <span class="token string">&#39;amfe-flexible&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>改进：</strong></p><ul><li>更好的dpr处理</li><li>支持viewport单位</li><li>更完善的兼容性</li></ul><h3 id="_5-vw-rem-混合方案" tabindex="-1"><a class="header-anchor" href="#_5-vw-rem-混合方案" aria-hidden="true">#</a> 5. vw + rem 混合方案</h3><p><strong>使用vw设置根元素字体大小</strong></p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token comment">/* 设计稿750px，分成100份 */</span>
<span class="token selector">html</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 13.333333vw<span class="token punctuation">;</span> <span class="token comment">/* 100/750 = 0.133333 */</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 限制最大最小字体 */</span>
<span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 750px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">html</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 320px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">html</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 42.667px<span class="token punctuation">;</span> <span class="token comment">/* (320/750)*100 */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="方案对比" tabindex="-1"><a class="header-anchor" href="#方案对比" aria-hidden="true">#</a> 方案对比</h2><table><thead><tr><th>方案</th><th>优点</th><th>缺点</th><th>适用场景</th></tr></thead><tbody><tr><td><strong>手动rem</strong></td><td>完全可控</td><td>需手动计算</td><td>小型项目</td></tr><tr><td><strong>lib-flexible</strong></td><td>成熟稳定，兼容性好</td><td>需配合构建工具</td><td>大多数移动端项目</td></tr><tr><td><strong>postcss-pxtorem</strong></td><td>自动转换，开发便捷</td><td>依赖构建工具</td><td>配合flexible使用</td></tr><tr><td><strong>vw方案</strong></td><td>纯CSS，无需JS</td><td>兼容性稍差</td><td>现代浏览器</td></tr><tr><td><strong>vw+rem混合</strong></td><td>兼顾灵活性和兼容性</td><td>配置复杂</td><td>复杂适配需求</td></tr></tbody></table><h2 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项" aria-hidden="true">#</a> 注意事项</h2><ol><li><p><strong>字体大小限制</strong></p><ul><li>浏览器有最小字体限制（通常12px）</li><li>基准font-size不要设置太小</li></ul></li><li><p><strong>第三方UI组件</strong></p><ul><li>某些组件使用固定px单位</li><li>需要在配置中添加黑名单</li></ul></li><li><p><strong>1px边框问题</strong></p><ul><li>rem方案下1px会被缩放</li><li>需要单独处理hairline边框</li></ul></li><li><p><strong>性能考虑</strong></p><ul><li>resize事件添加防抖</li><li>避免频繁计算</li></ul></li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 防抖优化</span>
<span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">setRem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> clientWidth <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token punctuation">(</span>clientWidth <span class="token operator">/</span> <span class="token number">750</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="推荐实践" tabindex="-1"><a class="header-anchor" href="#推荐实践" aria-hidden="true">#</a> 推荐实践</h2><p><strong>现代移动端项目推荐配置：</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> amfe-flexible postcss-pxtorem <span class="token parameter variable">--save</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// main.js (Vue/React)</span>
<span class="token keyword">import</span> <span class="token string">&#39;amfe-flexible&#39;</span>

<span class="token comment">// postcss.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;postcss-pxtorem&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">rootValue</span><span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span>        <span class="token comment">// 设计稿宽度750，flexible将屏幕分为10份</span>
      <span class="token literal-property property">propList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">selectorBlackList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;van-&#39;</span><span class="token punctuation">]</span>  <span class="token comment">// vant组件不转换</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样配置后，可以直接按设计稿标注的px值编写代码，构建时会自动转换为rem。</p>`,54),o=[p];function i(l,c){return s(),a("div",null,o)}const d=n(t,[["render",i],["__file","index.html.vue"]]);export{d as default};
